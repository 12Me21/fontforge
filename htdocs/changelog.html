<HTML>
<HEAD>
  <!-- Created with AOLpress/2.0 -->
  <!-- AP: Created on: 27-Aug-2002 -->
  <!-- AP: Last modified: 14-Jan-2003 -->
  <TITLE>Change log for PfaEdit</TITLE>
</HEAD>
<BODY>
<H1 ALIGN=Center>
  <A NAME="change-log">Changes</A> <SMALL>(Enhancements &amp; Bug Fixes)</SMALL>
</H1>
<UL>
  <LI>
    16-Jan-2003
    <UL>
	<LI>Recent char info changes broke copy & paste within text fields of the
	char info dlg.
	<LI>Problems reading GSUB table of a ttc files (problems remain, but we
	should no longer crash).
	<LI>Reorganized libraries. Now PfaEdit has an additional dependency:<BR>
	    <A HREF="http://libuninameslist.sf.net">libuninameslist</A>. Please
	    install this.
	<LI>With libuninameslist PfaEdit can display the Unicode annotation
	    information.
    </UL>
  <LI>
    14-Jan-2003
    <UL>
	<LI>Fixed a couple of bugs loading pcf files with complex encodings
	<LI>Bug in pasting metadata when there was no glyph comment.
	<LI>Made SetCharColor scripting command set the color on any selected glyphs
	<LI>Cleaned up selection behavior in fontview. Drag & drop made it difficult
	<LI>Oops. Was scaling round rect radius incorrectly in xfig conversion
	<LI>Oh yes, hebrew has final letters too. And greek. Add them in to the default for 'fina'.
	<LI>Fixed many problems with mac font generation
	<LI>Open VMS update from Jauk Jansen
    </UL>
  <LI>
    12-Jan-2003
    <UL>
	<LI>Support for xkb extension
	<LI>New Russian UI from Valek
	<LI>New Japanese UI from KANOU
	<HR>
	<LI>Saving a compacted font did not preserve the old encoding
	<LI>Added a preference item to control Edit->Join
	<LI>made Edit->Copy From->Copy Name (now Metadata) be a preference
	item too.
    </UL>
  <LI>
    9-Jan-2003
    <UL>
	<LI>Support for round rects in xfig files
	<LI>Added the glyph name to the title of the char info dlg
	<LI>Char info failed to deal with all the flags properly
	<LI>Fixed crash when creating GPOS sub-table 1 (simple positioning)
	<LI>GPOS/GSUB output now handles case where a feature has several
	different sets of flags.
    </UL>
  <LI>
    8-Jan-2003
    <UL>
	<LI>Update copyright notices
	<LI>Printing now handles anchored marks. (Display does not, just as display doesn't handle kerning-- because X doesn't).
	<LI>Support for curvsive positioning.
	<LI>I've registered with Adobe, and they have assigned PfaEdit an XUID
	base number of 1021. Now when new users start pfaedit for the first time
	they will be assigned an XUID base sequence of 1021 xxx nnn where xxx and nnn
	are two random numbers generated by pfaedit. New fonts will get a fourth
	number for their full XUID.
	<LI>Kanou points out that glyph names should not contain underscores
	so redo the .cidmap files to change to dashes. Also change "japan1_%d"
	to "cid-%d" to make life easier for me.
	<LI>KANOU points out there were places where pfaedit did not check
	psunicodenames_cnt. Once outside of BMP this causes a crash.
	<LI>New Japanese UI from KANOU.
	<LI>Support for many more GPOS/GSUB sub-tables.
	<LI>Keep track of the order in which characters are selected in the fontview and recreate that order when user asks to create a metricsview based on the fontview's selection
	<LI>Make it possible to drag&drop characters from fontview into metricsview (again keeping track of selection order)
	<LI>Make it possible to drag&drop characters from fontview into charview to create references
	<LI>Make it possible to drag&drop characters from fontview into charinfo to create ligatures, etc.
	<LI>Command to set the default values for sub GSUB/GPOS features that are easy for PfaEdit to figure out.
	<LI>Ability to zoom metrics view.
	<LI>Metrics view displays anchor points and does the needed work to
	position the characters. It is also possible to move anchor points around
	in the metrics view.
	<LI>Metrics view now has a pop-up menu that allows you to see alternate metrics
	<LI>Metrics view now has a submenu (off of View) which allows you to
	change the current glyph to one of its alternates.
	<LI>Fixed unintitialized variable what would sometimes cause a crash
	when storing bitmaps in a TTF/OTF file.
	<LI>Fixed crash bug in 29-Dec when generating a truetype font without
	a GPOS table.
	<LI>Many changes to charinfo dlg. Made non-modal. Can Copy/Paste Position/Substitution
	data.
	<LI>Do a minimal amount of work toward supporting the alpha channel of
	a png file.
  </UL>
  <LI>
    29-Dec-2002
    <UL>
      <LI>PfaEdit now supports <A HREF="overview.html#Anchors">anchor points</A>
      for mark to base (ligature and mark) positioning.
      <LI>PfaEdit was mistakenly treating NumLock on PC keyboards as if it were
      the command key on Mac keyboards.
      <LI>The font info dlg now remembers what tab was last pressed.
      <LI>The char info dlg has been restructured. It includes a script field,
      and associates a tag with the ligature (if any).
      <LI>I have decided to generate a 'GPOS' table rather than a 'kern' table
      in truetype output as well as in opentype output (unless applemode is set).
      <LI>I have changed the default names of items in adobe's private use
      area to match their new conventions. ie. names used to look like "Asmall"
      and now look like "a.sc".
      <LI>I have rewritten the way <A HREF="gposgsub.html">GPOS and GSUB</A>
      tables are output. I hope this will not have much effect on users, but
      it does mean that a few more sub-tables are now supported.
  </UL>
  <LI>
    23-Dec-2002
    <UL>
      <LI>Various improvements to cubic->quadratic (truetype) conversion.
      <LI>When switching from displaying a 12,8,6,4,3,2,1pt bitmap to a 24pt
        anti-aliased version, pfaedit would fail to update the display.
      <LI>The bitmap dlg would come up with the labels for X showing when
	it should have shown those for Win/Mac.
      <LI>Inspired by KANOU's mentioning the mona font, I've made it possible
	to generate an ms bitmap only ttf font. This is done by creating
	dummy glyph and loca tables (full of space glyphs) and putting a
	bitmap scaling table which causes the most likely pixelsizes to be
	scaled from the strikes available.
	<P>You can generate this with:
	[No Outline Font] [In TTF]
      <LI>
	Drat. Fix of 24-Nov was wrong. I still wasn't putting the UniqueID into
	the Private dict.
      <LI>
	I've been generating bad macbinary files since I started
	<UL>
	<LI>I had not noticed that the resource and data fork must be padded to a multiple of 128 bytes.
	    <UL><LI>This also meant that on rare occasions I would read them incorrectly too.</UL>
	<LI>I was generating the crc incorrectly.
	</UL>
      <LI>
	Be a bit more vigorous about displaying filter text in file choosers.
      <LI>
	Default buttons didn't respond to the keypad enter key.
      <LI>
	Pressing OK in the character info dlg would often destroy the font's encoding
	event when it should not have.
      <LI>
	Was generating bad kerning tables for mac FONDs.
      <LI>
	Jim Killock reminds me that there was no way for pfaedit to read kerning
	data from a mac FOND. File->Merge Kern Data will now accept a mac
	resource file.
    </UL>
  <LI>
    15-Dec-2002
    <UL>
      <LI>
	Add support for Big5HKSCS
      <LI>
	Redo CJK encodings
      <LI>
	Update cidmap files.
    </UL>
  <LI>
    14-Dec-2002
    <UL>
      <LI>
	Add support for reading windows .FON and .FNT files.
      <LI>
	Add support for writing windows .FNT files. Sadly .FNT files aren't particularly useful. They need to be converted to .FON files with the resource editor somehow.
      <LI>
	Bug when reading postscript files that included complicated combinations
	of translate scale and concat commands.
      <LI>
	PfaEdit was a bit too cavalier about guessing how big serifs were. Caused
	problems when autokerning a fraktur font. (PfaEdit thought it had huge
	serifs when it had none).
      <LI>
	Direction (Clockwise, counterclockwise, correct) menu items are now
	greyed out if the selected path is open.
      <LI>
	New OpenVms patches from Jacob Jansen.
      <LI>
	Update unicode database to 3.2
    </UL>
  <LI>
    13-Dec-2002
    <UL>
      <LI>
	PfaEdit will now open a ttf/otf font that contains only bitmap strikes
      <LI>
	PfaEdit will now read NFNT resources (old mac bitmaps)
      <LI>
	PfaEdit will import NFNT resources
      <LI>
	Fixed a number of problems with loading and saving bdf files
	<UL>
	  <LI>Did not understand that the "ENCODING" keyword could take two
	  values if the first were -1
	  <LI>Added unencoded glyphs at the wrong encoding (I know that sounds
	  like an oxymoron. I assign them an encoding, and I did it badly).
	  <LI>If a font name were not one of the X Logical Font Names then
	  pfaedit might fail to give the font a familyname or a fontname. This
	  caused more problems when generating a new bdf file.
	</UL>
    </UL>
  <LI>
    11-Dec-2002
    <UL>
      <LI>
	Revert Glyph is now undoable
      <LI>
	Fixed a crash when pressing return in the font display of a bitmap font.
      <LI>
	Display the name of references near the top of the reference in the outline char view.
      <LI>
	Took the width display off the info line and did it as hints are displayed.
      <LI>
	Menus now respond to Home and End key events.
      <LI>
	I have changed the calling conventions for the ExpandStroke scripting
	command to reflect the height ratio value that is now needed.
      <LI>
	Holding down the Alt (Meta) key when using the freehand tool will now
	close the path.
      <LI>
	The Generate Fonts dlg will now display an appropriate bitmap fontname
	if "No Outline Font" is selected.
      <LI>
	I think I've got the wacom stuff working now. FreeHand tool now takes
	options.
    </UL>
  <LI>
    08-Dec-2002
    <UL>
      <LI>
	Oops. Can't use Alt-Shift for menus (it's treated as a mnemonic) use
	Alt-Ctl-Shift instead.
      <LI>
	Reorganized the prefs dlg.
      <LI>
	Made FontInfo non-modal.
      <LI>
	Added a default icon for all pfaedit's windows & dlgs.
    </UL>
  <LI>
    06-Dec-2002
    <UL>
      <LI>
	Fixed a problem where PfaEdit still picked bad fonts sometimes.
      <LI>
	Typo in format spec for character windows
      <LI>
	At Werner's suggestion:
	<UL>
	  <LI>The Transform dlg now preserves hints in the undo
	  <LI>Added an indication of which layer was active
	  <LI>Added an indication on the title bar that a character was changed
	  <LI>Added a Revert Glyph command
	  <LI>The location of the advance width pops up on the info line when the cursor moves over the advance width
	  <LI>changed the Set Width command to get the right default value.
	  <LI>There were some layout problems in the char info dlg.
	</UL>
      <LI>
	Redid the configuration for mac os/x. I've just upgraded to the new
	developers' tools and that fixed a lot of problems.
    </UL>
  <LI>
    05-Dec-2002
    <UL>
      <LI>
	Fixed a crash in menus, if the cursor was moved from a submenu (a cascaded menu)
	to the menubar without passing through the main menu then a crash would
	happen.
      <LI>
	Clicking in a menu above the first line will dismiss the menu.
      <LI>
	Fixed a crash when generating postscript fonts.
      <LI>
	Oops. Bug in work of 2-Dec. The character named "u" was treated as
	uXXXX and given unicode U+0000 rather than U+0075.
      <LI>
	It is now possible to switch between editing layers in the outline character
	view by using the mnemonics displayed in the layers palette (even if the
	layers palette is hidden).
	<P>
	Or by using the popup menu invoked by the third mouse button.
      <LI>
	Rewrote Expand Stroke so that the caligraphic pen is no longer treated
	as a line (it is now treated as a rectangle).
      <LI>
	Changed behavior of Next/Prev char so that they do not wrap in the
	outline character view. Also added the encoding to the title.
      <LI>
	In the outline view made a seperate menu entry for Char Info and
	removed it from "Get Info". Made Ctl-Shft-I invoke Char Info in all
	views (Ctl-I will also invoke it everywhere but the outline view).
      <LI>
	Undo will now attempt to reset the modified bit on a character.
	It will not attempt to reset the modified bit on the font as a whole
	(there are too many things that can change without setting undo info).
    </UL>
  <LI>
    2-Dec-2002
    <UL>
      <LI>
	If the fontview were only one line high PfaEdit would not scroll to the
	selected character properly.
      <LI>
	Adobe has released a new version of their glyph naming conventions.
	In particular they provide names for code points outside of the bmp.
	Danilo Sagan points out that they also allow for alternate glyph names.
	(specified in the <A HREF="http://partners.adobe.com/asn/developer/type/otfdk/main.html">FDK</A>).
     <LI>
	Remove the PFAEDIT_PI1 environment variable.
     <LI>
	Cut and Paste bug fixed when clearing metadata.
    </UL>
  <LI>
    25-Nov-2002
    <UL>
      <LI>
	Harald Harders provides a patch to allow SetItalicAngle to deal with
	real numbers.
      <LI>
	Vadim Belman provides a patch to keep Element->MetaFont from crashing when
	applied to spaces.
      <LI>
	Bringing up the preference dlg would segfault if there were arguments
	specified for autotrace.
      <LI>
	Put in a hack so that the environment variable PFAEDIT_PI1 controls
	whether U+03D6 is named "pi1" (as Unicode suggests it ought to be) or
	"omega1" (as Adobe has said it should be).
      <LI>
	Follow riggle's suggestion and use the shell command "open" (on a Mac)
	to bring up a browser window.
    </UL>
  <LI>
    24-Nov-2002
    <UL>
      <LI>
	Harald Harders points out that UniqueID needs to be in both the font and
	the Private dictionaries in a PostScript font.
      <LI>
	And provides access to UniqueID from the scripting language.
      <LI>
	More fixes for TeX sfd files.
    </UL>
  <LI>
    20-Nov-2002
    <UL>
      <LI>
	Changed the Simplify More command to bring up a dlg giving the user control over what errors Simplify More is allowed to induce.
      <LI>
	Bug in import image with non-latin1 fontnames
      <LI>
	New Russian ui translation
      <LI>
	Merge fonts didn't work well with CID keyed fonts
      <LI>
	Fixed yet another problem with notdef generation.
      <LI>
	Fixed yet crash in sfddiff.
      <LI>
	Using Font Info to convert to SJIS didn't work.
      <LI>
	Merge fonts had problems when both fonts were CID keyed.
      <LI>
	Generate a unicode encoding subtable even when generating a CJK encoding subtable.
      <LI>
	Added a preference item to allow user to specify whether s/he would rather read in the unicode or the cjk encoding subtable.
    </UL>
  <LI>
    13-Nov-2002
    <UL>
      <LI>
	Two new tools in the outline character view.
	<UL><LI>A hand tool -- for scrolling around
	<LI>A freehand tool -- for having pfaedit try to fit splines to a hand drawn curve</UL>
      <LI>
	MergeFonts was broken from scripts.
      <LI>
	New Russian UI from Valek.
      <LI>
	Another remove overlap fix from KANOU.
      <LI>
	Added code to invoke Internet Explorer (or an Mac App) on the Mac
	(so pressing F1 should actually load some help on the mac now).
      <LI>
	Fixed random crash in font generation dialog
      <LI>
	PS->TTF conversion tried to force splines in cases where it could not.
   </UL>
  <LI>
    05-Nov-2002
    <UL>
      <LI>
	Improved behavior of Remove Overlap. Fix inspired by Kanou.
      <LI>
	Added a "Find Intersections" command, a varient of remove overlap
	that stops after it finds the intersections. I think this half of
	the job has no major bugs.
      <LI>
	If a single point is in the clipboard, then PfaEdit will also export
	the clipboard as STRING, giving the coordinates of the point. This
	is to make it easier to refer to the point.
   </UL>
  <LI>
    04-Nov-2002
    <UL>
      <LI>
	KDE has the lovely habit of losing some resize events when in
	continuous resize mode. So I've tweaked the fontview resize code
	so that it is less dependent on individual events.
      <LI>
	Added a mode where the user can choose between whether the font shown
	in the fontview should be scaled so that the em fits in the space provided
	(this is the old behavior) or so that the bounding box does.
      <LI>
	Rewrote the knife tool so that it cuts at the end rather than as it
	goes along. I think this is easier to use.
      <LI>
	Bug in the generation of format=2 truetype encoding tables (used for
	CJK fonts).
   </UL>
  <LI>
    02-Nov-2002
    <UL>
      <LI>
	Png reading failed on greyscale images with an alpha channel
      <LI>
	Png now reads mono images as mono.
      <LI>
	make install (via libtool) didn't work if "." weren't in the PATH.
   </UL>
  <LI>
    <A HREF="oldchangelog.html">Earlier Changes </A>
</UL>
</BODY></HTML>
