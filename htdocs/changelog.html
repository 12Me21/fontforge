<HTML>
<HEAD>
  <!-- Created with AOLpress/2.0 -->
  <!-- AP: Created on: 27-Aug-2002 -->
  <!-- AP: Last modified: 19-May-2004 -->
  <TITLE>Change log for FontForge</TITLE>
</HEAD>
<BODY>
<H1 ALIGN=Center>
  <A NAME="change-log">Changes</A> <SMALL>(Enhancements &amp; Bug Fixes)</SMALL>
</H1>
<UL>
  <LI>
    19-May-2004
    <UL>
      <LI>
	Give the user access to the OS/2 fields WinAscent and WinDescent.
      <LI>
	Add a new command (Points-&gt;Make Line) which will turn a spline between
	two selected points into a line.
      <LI>
	Improve the behavior of defaulting control points so we don't get
	self-intersecting loops
      <LI>
	Add a mode to the pointer tool. Holding down the &lt;Alt&gt; key now means
	we don't join two open contours if they make contact while dragging.
      <LI>
	When loading an otf file and saving it as ttf, sometimes the space glyph
	would become zero width.
      <LI>
	Redid the way mac families were output. Should be more flexible under OS/X
    </UL>
  <LI>
    9-May-2004
    <UL>
      <LI>
	Several problems with tfm files. Didn't handle tfms with more that 128 lig/kerns.
      <LI>
	Failed to set the r2l flag properly in 'morx' tables
      <LI>
	More typos in the ghost hint code
      <LI>
	Allow users to express error term of the scripting Simplify command as a
	fraction.
      <LI>
	The strings in the context / chaining dlg's initial pane were wrong
      <LI>
	Fixed some bugs in converting OT contextual substitutions to Mac state machines
      <LI>
	If we wanted to put a glyph with references into a subroutine (in type1 output)
	we failed miserably
      <LI>
	Added a new command
	<A HREF="editmenu.html#ReplaceRef">Edit-&gt;ReplaceWithReference </A>(and
	a scripting version too), which searches all glyphs in the font for any selected
	glyphs, and for each embedded occurance it replaces the outlines of the glyph
	with a reference to it. This is because reading a postscript (type2 or type1)
	font generally loses all reference information.
      <LI>
	The documentation for OS/2.winAscent makes no sense. I shall ignore it and
	set winAscent to hhea.ascent
      <LI>
	Sivan says that hebrew kerning is broken again.
      <LI>
	The search dlg didn't work on quadratic (truetype) fonts
    </UL>
  <LI>
    2-May-2004
    <UL>
      <LI>
	I've changed the colour of check boxes because people found black confusing
      <LI>
	FontForge read Italic Correction incorrectly out of tfm files and had minor
	problems generating tfm files.
      <LI>
	the kern class dlg had an uninitialized variable (introduced with the multiple
	master code I think)
      <LI>
	FontForge would sometimes crash when generating a GDEF table for some types
	of otf font.
      <LI>
	Pierre Hanser has updated the french UI, and pointed out some problems with
	the english UI.
      <LI>
	In a version of FontForge compiled with MultiLayer on, Pasting something
	containing a reference screwed up memory
    </UL>
  <LI>
    25-Apr-2004
    <UL>
      <LI>
	AutoHint produced ghost hints for curved stems that sometimes were outside
	of the character.
      <LI>
	Fixed some uninitialized variables in MetaFont (but the algorthim is still
	flawed)
      <LI>
	FontForge had problems when the fontview was maximized.
      <LI>
	The 18-Apr patch for cubic-&gt;quadratic conversion had a bug which generally
	resulted in a crash.
      <LI>
	When flickering in and out of compacted mode, during a Generate Fonts, the
	encodings in the displayed bitmap could get out of sync with those of the
	font leading to a crash.
      <LI>
	Don't mess with the control points in point type conversion
	(corner-&gt;curve/tangent) when the they are already reasonable.
      <LI>
	Allow rectangles and ellipses to have seperate settings of the center out
	flag.
      <LI>
	Add a dialog which allows you to specify exactly where rectangles/ellipses
	should go.
      <LI>
	Double-clicking on the scale/flap/rotate/skew tool brings up the transform
	dialog.
      <LI>
	Add a couple of entries in the transform dlg option menus which copy information
	from the last ruler measurement.
      <LI>
	Give the user control over how long the ruler window hangs around.
    </UL>
  <LI>
    18-Apr-2004
    <UL>
      <LI>
	Fix a couple of bugs dealing with references in multilayered editing.
      <LI>
	Uninitialized variable in creation of 'name' table (introduced on 10-Apr)
      <LI>
	Edit-&gt;Merge didn't work properly on quadratic splines
      <LI>
	LCarets should have ignored the script assigned to them, but they didn't.
      <LI>
	Put in more protection against bad GSUB/GPOS tables. In particular mangal.ttf
	has a bad GSUB table (with erroneous class specifications).
      <LI>
	FontForge wasn't setting <TT>'hhea'.caretSlopeRun</TT> appropriately in italic
	fonts (should match <TT>tan(italicAngle)</TT>).
      <LI>
	Oops. Can do much better converting from cubic to quadratic splines. We were
	getting far too many linear segments.
      <LI>
	Our cubic-&gt;quadratic conversion could generate splines where the endpoints
	were less than 1 unit apart. Since ttf rounds all coords to ints, this meant
	we'd get the two endpoints on top of one another.
      <LI>
	When generating a truetype font from a cubic database, FontForge calculated
	'maxp'.maxCompositePoints incorrectly.
      <LI>
	Gave the user control over when point numbers are visible (even for cubic
	fonts)
    </UL>
  <LI>
    10-Apr-2004
    <UL>
      <LI>
	The flatten commands didn't preserve the ttf 'name' table nor the 'OS/2'
	table
      <LI>
	Redid the way 'name' table was generated, hopefully we do better for the
	mac now.
      <LI>
	the 'kern' table had a bad rangeShift value (it was the negative of what
	it should be)
      <LI>
	Pasting a reference from one font to another could crash if the destination
	font did not have the refered character.
      <LI>
	".null" was appearing twice in the 'post' table when saving a ttf file a
	second time.
      <LI>
	Markus Schwarzenberg points out that the ScaleToEm() scripting command didn't
	work when given a single argument.
      <LI>
	Pierre Hanser points out that the version fix on 4-Apr had a bug that caused
	crashes on Macs (perhaps elsewhere).
    </UL>
  <LI>
    04-Apr-2004
    <UL>
      <LI>
	Several more fixes for cff output.
      <LI>
	We had a bad habit of including extraneous hintmask operators in output
      <LI>
	Add a proper ff version (well, as much as my versions be proper) to
	postscript/svg output
      <LI>
	Patch from Kanou about reading format 2 bitmaps in a sfnt
      <LI>
	Patch from Kanou. MS requires a weird format for GSUB in vertical writing.
    </UL>
  <LI>
    29-Mar-2004
    <UL>
      <LI>
	When Type1 output needed to output a reference as inline splines (as opposed
	to a subroutine call or using a seac command) then it would lose any translation
	applied to that reference.
      <LI>
	Patch to Type3 output from R.L.Horn
      <LI>
	FontForge used to crash when reading in a bdf glyph with a bad bounding box.
      <LI>
	Reading a kerning class from an sfd file when that class had more second
	character classes than first character classes would screw up memory and
	probably cause a crash.
      <LI>
	Attempting to edit a 'cvt ' table in a font without one caused a crash.
	Attempting to edit a 'cvt ' table in a font with one showed an empty table.
      <LI>
	Make scaling from the fontview apply to kerning and positioning data.
      <LI>
	Drawing a rectangle by dragging from center out didn't work
      <LI>
	Display phantom points when debugging. Be prepared to find either 2 (horizontal
	metrics) or 4 (both horizontal or vertical) depending on what version of
	freetype we've got.
      <LI>
	Bug in both reading and writing encoding format 0 of cff fonts. I forgot
	to ignore .notdef so everything was off by 1.
      <LI>
	If a glyph was used as a reference in another glyph, and we put it in a
	subroutine (type1 output), and it had hint conflicts, then the first group
	of hints never got output.
      <LI>
	In multilayered mode, the Revert Glyph command left memory in a potentially
	bad state. (If you immediately closed the charview, then nothing bad would
	happen, but if you tried any editing in it, then nasty things happened.)
    </UL>
  <LI>
    21-Mar-2004
    <UL>
      <LI>
	When flattening a CID file fontforge lost track of the script/lang list (and
	other things) which caused bugs when dealing with substitutions
      <LI>
	When saving multiply, fontforge could free a fonts hash table several times
      <LI>
	When flattening by a CMAP file from a script fontforge could crash
      <LI>
	Added a CIDFlatten command to scripting.
      <LI>
	The "cleanup of OS/2" on 29-Feb actually broke WinAscent/Descent
      <LI>
	When loading a mac unicode string from the 'name' table, fontforge failed
	to convert the language correctly.
      <LI>
	When loading a mac contextual substitution statemachine, fontforge made egregious
	errors in guessing to what glyphs were usable for a substitution of the marked
	glyph.
      <LI>
	Added the current encoding to the font's window title (also display a flag
	to show whether the font has been changed)
      <LI>
	When moving points around on an order2 contour fontforge could end up with
	bad control points and would then produce annoying internal errors alerting
	the user to this fact.
      <LI>
	The CID Flatten commands did not work when the view was compacted.
      <LI>
	CharInfo had been deliberately disabled in CID fonts
      <LI>
	Show ATT didn't work with CID keyed fonts
      <LI>
	The preference mapping between mac and opentype small caps features was wrong.
      <LI>
	Werner found a strange bug in splinefill that I can't reproduce (and can't
	understand how it could happen) but the fix appears obvious.
      <LI>
	Add a command to show what glyphs use the current glyph in a substitution
	(so "A.swash" would show that "A" used it, and "i" would show that "fi" used
	it).
      <LI>
	Changed the extension shown in the Generate Fonts dlg for multiple saves
	to ".pfb". Put in a %s to make it obvious that more will be added to the
	name. Support people who want .pfa fonts too.
      <LI>
	The dialog for adding/editing correspondences between mac feature/settings
	and opentype features never went away.
      <LI>
	Disable the Default ATT menu if no char is selected in the fontview.
      <LI>
	FontForge sometimes had trouble drawing the correct rotated glyph in cid
	fonts on the display lines of the fontview.
      <LI>
	Changed the way names used in cidmap files, so there are new cidmap files
	now.
      <LI>
	The ShowAtt dialog could overwrite itself if there were enough aats in it.
	(and at one point the vertical scroll bar was set to the bounds of the horizontal
	scroll bar)
      <LI>
	Still getting the windows ascent/descent wrong. This time in CID keyed fonts.
      <LI>
	Add some new language translations for things like "Bold" (dutch, swedish,
	norwegian)
      <LI>
	Dragging and dropping a char from the font view into the char info dlg (to
	create a substitution) created a crash instead.
      <LI>
	Support more of postscript in the interpreter
      <LI>
	Our svg fonts pointed to a not-yet-existing dtd file
      <LI>
	Support for Apple's distortable fonts (sort of like truetype multi-master
	fonts)
      <LI>
	Depressing the control key now makes popups live longer (until the mouse
	moves).
      <LI>
	new command in MM menu: Blend to new font
    </UL>
  <LI>
    2-Mar-2004
    <UL>
      <LI>
	Changed name from pfaedit to fontforge
    </UL>
  <LI>
    <A HREF="oldchangelog.html">Earlier Changes </A>
  <LI>
    <A HREF="pfaeditchangelog.html">Changes to PfaEdit (predecessor to
    FontForge)</A>
</UL>
</BODY></HTML>
