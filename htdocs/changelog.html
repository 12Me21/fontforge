<HTML>
<HEAD>
  <!-- Created with AOLpress/2.0 -->
  <!-- AP: Created on: 27-Aug-2002 -->
  <!-- AP: Last modified: 1-Jan-2004 -->
  <TITLE>Change log for PfaEdit</TITLE>
</HEAD>
<BODY>
<H1 ALIGN=Center>
  <A NAME="change-log">Changes</A> <SMALL>(Enhancements &amp; Bug Fixes)</SMALL>
</H1>
<UL>
  <LI>
    ???
    <UL>
      <LI>
	More accurate round joints in stroking.
      <LI>
	Better approximations to splines which turn through 180 degrees or more
      <LI>
	Support for reading cff files.
      <LI>
	Yet more problems counting ttf points
      <LI>
	Update copyright notices.
    </UL>
  <LI>
    28-Dec-2003
    <UL>
      <LI>
	RemoveATT scripting command didn't work if the third argument were "*"
      <LI>
	PfaEdit's clipping in the character view left something to be desired.
      <LI>
	Make Meta-Arrow move selected points by 10 times what Arrow would move them
	by.
      <LI>
	Grabbed the feature ordering for GPOS/GSUB specified on the
	<A HREF="http://www.microsoft.com/typography/specs/default.htm">microsoft
	site</A> and taught it to PfaEdit.
      <LI>
	Change the Point Info dlg
	<UL>
	  <LI>
	    to allow the user to control the point type from there.
	  <LI>
	    to enforce constaints on control points (ie. the control points of a curve
	    point must be in line with the point itself)
	  <LI>
	    by adding an alternated mode of entering data, by distance and angle (rather
	    than just offset)
	</UL>
      <LI>
	Some MF fonts have glyph names with characters which aren't allowed in PostScript
	names
      <LI>
	PfaEdit failed to set widthset when it read in glyphs from a windows FNT
	(FON) file. This meant that some glyphs might be ignored.
      <LI>
	The context chaining dialog had a bad test for valid glyph names and complained
	about any name containing digits
      <LI>
	The histogram dlg would crash if the mouse moved across it when the window
	was so wide that it could contain more stem widths than were actually in
	use.
      <LI>
	Added three commands to the metrics view view menu to allow users to insert
	glyphs by name or encoding.
      <LI>
	Yannis points out that afm files produced on fonts with vertical metrics
	did not contain "WY" values (vertical advance width), also that the vkerns
	in the file actually contained the values of horizontal kerns.
      <LI>
	The 'kern' table did not contain pairwise vertical kerns (it did contain
	vertical kerning by class).
      <LI>
	The View-&gt;Substitutions sub menu of the metricsview was not being cleared
	properly if the current glyph had no substitutions.
      <LI>
	Yannis wants the View-&gt;Substitutions menu to have a way to return to the
	original glyph.
      <LI>
	Yannis points out that the metricsview in vertical mode changed the top side
	bearing in an unexpected way. Also the vertical advance width did not refresh
	the display properly.
      <LI>
	Thanks to David Opstad, I now have an example of a format 1 kerning table
	and have extended PfaEdit to support kerning by state machine.
      <LI>
	The code for generating and loading otb (OpenType bitmap) fonts was broken.
      <LI>
	And the code for generating my own wierd bitmap only fonts for windows had
	some flaws too (different flaws).
      <LI>
	If I typed a character into a fontview (or char view) and the font did not
	contain the character, pfaedit would not select that slot that encoded the
	character, even if the character was in the encoding.
      <LI>
	When loading a ps type3 font, make sure that the glyph name is available
	when parsing glyphs so we can produce reasonable error msgs. (mostly this
	means "Spline stroke is too big"
      <LI>
	Only generate Spline stroke too big errors once per font.
      <LI>
	Adam Goode tells me that the format 12 (32bit unicode) cmap was wrong, and
	provided a patch to fix it.
      <LI>
	Pretty much rewrote the stroking command from scratch.
      <LI>
	Merge fonts would crash when merging in a font containing either a ligature
	caret or a nested lookup.
      <LI>
	Made PfaEdit cognizant of the proposed unicode dotlessj character (0237),
	it will now use either this or the dotlessj in adobe's private use area
	(depending on which is in the font)
      <LI>
	PfaEdit would crash when trying to build an accented character based on inverted
	breve in pala.ttf
	<UL>
	  <LI>
	    It wrongly considered pala.ttf to be slightly italic (.0005&#176;)
	  <LI>
	    It would crash when doing this in an italic font
	</UL>
	<P>
	  <HR>
      <LI>
	When importing postscript (type3 fonts, eps files) counter-clockwise paths
	which are both stroked and filled cause problems
      <LI>
	Changed the version stamp of otb fonts from 'OTTO' to 1.0
    </UL>
  <LI>
    10-Dec-2003
    <UL>
      <LI>
	When there were multiple features with the same tag (different scripts with
	'kern' for instance) PfaEdit would produce multiple copies of the same lookup
	instead of different lookups.
      <LI>
	PfaEdit was not setting the right to left lookup flag bit properly for hebrew
	(and presumably arabic) kerning
      <LI>
	Remove overlap was coalescing some splines that it should not have.
      <LI>
	Typo in expand stroke meant that some round line joins were really weird
    </UL>
  <LI>
    5-Dec-2003
    <UL>
      <LI>
	When changing the ascent/descent with fontinfo or scaletoem some of the OS/2
	fields did not get updated properly.
      <LI>
	The OS/2 TypoDescent field was set positive instead of negative.
      <LI>
	Added two scripting functions SetTTFName and GetTTFName to give scripts access
	to the truetype names as well as the PS ones
      <LI>
	Patch from Kazuyuki. SetPanose didn't work when argument was an array.
      <LI>
	New French translations from Pierre
      <LI>
	$copyright didn't return the correct thing (Patch from Giuseppe Ghibo)
      <LI>
	Kerning pair data for non-ASCII unicode characters did not get output properly
	into SVG fonts
      <LI>
	The AddATT scripting command did not add ligatures correctly leading to problems
	when time came to generate a font.
    </UL>
  <LI>
    23-Nov-2003
    <UL>
      <LI>
	PfaEdit would crash if given an encoding for the locale which it didn't
	understand
      <LI>
	Center/Thirds in width from the font view would change the width
      <LI>
	There was a synchronization problem and the truetype debugger window could
	deadlock
      <LI>
	PfaEdit failed to read a Contextual (but not Contextual chaining) Coverage
	lookup properly.
    </UL>
  <LI>
    10-Nov-2003
    <UL>
      <LI>
	PfaEdit was crashing when loading a bitmap font with encoded characters outside
	the range specified by the encoding (ie. a character 0x10000 in a unicode
	BMP font).
      <LI>
	Fixes for several memory leaks provided by Kazuki Ohta
      <LI>
	Slight improvements to the View-&gt;Combinations-&gt;Ligature dlg
    </UL>
  <LI>
    8-Nov-2003
    <UL>
      <LI>
	Bug introduced 6-Nov, PfaEdit generated a bad 'loca' table when outputing
	a ttf outline font with bitmaps.
      <LI>
	PfaEdit was getting the truetype point number wrong when reading outlines
	from an sfd file.
      <LI>
	If the loca table was 2 or 4 bytes long, PfaEdit failed to warn about a bad
	glyph count.
      <LI>
	PfaEdit got confused if two truetype glyphs had the same name.
      <LI>
	When dumping out embedded ttf bitmaps, PfaEdit got confused by the extra
	glyphs (.null and return) and generated garbage.
      <LI>
	Make View-&gt;Combinations-&gt;ligature dlg a bit better for non-latin glyphs
    </UL>
  <LI>
    6-Nov-2003
    <UL>
      <LI>
	The clut used for drawing anti-alias bitmaps in the metrics view was wrong.
      <LI>
	In a bitmap only ttf file, PfaEdit was usually producing bad line spacing
	data as far as the mac was concerned.
      <LI>
	When importing bitmaps into an empty font, we might as well change to font
	view to show the bitmaps rather than the empty outline data.
      <LI>
	If glyph 0 was selected in the fontview then the File-&gt;Open Outline command
	was disabled.
      <LI>
	With a user defined encoding we were again getting occasional crashes.
	(introduced by my work on bitmaps)
      <LI>
	On certain glyphs, the optimizer introduced an slight error when calculating
	a spline's coefficients from its control point. Even though this error was
	on the order of 7e-8 it was enough that the rasterizer produced grossly incorrect
	results. I have pulled the relevant routine out into its own file which is
	now compiled by itself without optimization.
    </UL>
  <LI>
    4-Nov-2003
    <UL>
      <LI>
	When PfaEdit removes glyphs with Font Info-&gt;Encoding-&gt;Number of characters,
	it will now run through the font and remove any ligatures, substitutions,
	etc. refering to non-existant glyph names.
      <LI>
	Some improvements to remove overlap.
      <LI>
	Added a warning message so that when user attempts to output a ttf file where
	no characters have unicode encodings, then the user at least gets warned
	that the result will probably not work. For fonts with fewer than 256 glyphs
	it will offer the choice of a symbol encoding.
      <LI>
	If a reference were copied in the outline character view and pasted into
	the font view, pfaedit would crash.
      <LI>
	the expand stroke patch on 29-Sept broke caligraphic and elipse modes.
      <LI>
	The mouse's scroll wheel did not work in the metrics view.
      <LI>
	The metrics view resized very slowly under window managers which do continuous
	resizing.
      <LI>
	Give the magnifying glass's rectangle mode a threshold so that it doesn't
	resize tiny rectangles which are really caused by mouse gitter.
      <LI>
	Attempt to set a zoom size for character and bitmap windows, but modern window
	managers don't seem to support the old protocol, and I can't find docs on
	a new version.
      <LI>
	Was not converting filenames to unicode properly for the open/generate progress
	dlgs.
      <LI>
	PfaEdit would crash when attempting to draw a character for which in had
	no (X11) glyph when doing bidirectional text.
    </UL>
  <LI>
    <A HREF="oldchangelog.html">Earlier Changes </A>
</UL>
</BODY></HTML>
