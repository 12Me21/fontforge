<HTML>
<HEAD>
  <!-- Created with AOLpress/2.0 -->
  <!-- AP: Created on: 27-Aug-2002 -->
  <!-- AP: Last modified: 29-Jul-2005 -->
  <TITLE>Change log for FontForge</TITLE>
  <LINK REL="icon" href="ffanvil16.png">
</HEAD>
<BODY>
<H1 ALIGN=Center>
  <A NAME="change-log">Changes</A> <SMALL>(Enhancements &amp; Bug Fixes)</SMALL>
</H1>
<P>
Changes since the last release may be found by performing a "cvs log" command
on the file stamp.c.
<P>
<UL>
  <LI>
    28-July-2005
    <UL>
      <LI>
	<FONT COLOR="Red"><STRONG><BIG>Redesigned the way encodings are handled.
	From the user's perspective Encodings are no longer controlled by FontInfo,
	but via an encoding menu.</BIG></STRONG></FONT>
      <LI>
	If we create a bitmap strike in an empty font then change the fontview to
	look at the strike.
      <LI>
	The SetWidth command of FontView produced garbage defaults for empty fonts
      <LI>
	Don't set the hinting needed bit on: bitmap only fonts, multilayered fonts,
	stroked fonts nor quadratic fonts.
      <LI>
	Fix some problems with the generated names in File-&gt;Generate multiple
      <LI>
	The Save command failed to reset the font window's title (so it still looked
	modified)
      <LI>
	The enabled state of Encoding-&gt;Detach Glyphs was wrong
      <LI>
	FF still didn't allow two ligatures to be created for the same glyph (ie.
	it complained if you tried to make both "f + f + i =&gt; ffi" and "ff + i
	=&gt; ffi"
      <LI>
	Added a TypeOf command to scripting
      <LI>
	Added a GetPosSub command to scripting.
      <LI>
	Werner says negative widths and depths be set to 0 in tfm files.
      <LI>
	FontForge was generating an incorrect warning message. If a 'name' table
	contains a duplicate entry for a given platform/specific/language/id that's
	an error in the font. But ff conflated mac names with window names and so
	was only checking language/id. So if the mac windows names were different
	(which is probably a bad design idea, but not an error) ff said it was wrong.
	It can also be caused by using a character in the string which is not in
	the Mac Encoding for that language.
      <LI>
	Don't set "Hinting needed" flag in bitmap only fonts.
      <LI>
	AutoHint had a crash if there were open contours in a glyph being hinted.
      <LI>
	Add a couple of browsers to the list to check by default.
      <LI>
	Using the kerning pair closeup dlg to create a new kerning pair caused a
	crash (eventually).
      <LI>
	When saving a block of ttf bitmap glyphs all with about the same metrics,
      <LI>
	Kern pairs were not scaled to emsize when loading from an afm file.
      <LI>
	Add a series of new selection commands, to the font view and to scripting:
	<UL>
	  <LI>
	    SelectChangedGlyphs
	  <LI>
	    SelectHintingNeeded
	</UL>
	<P>
	(just to scripting)
	<UL>
	  <LI>
	    SelectSingletons
	  <LI>
	    SelectMoreSingletons
	  <LI>
	    SelectFewerSingletons
	</UL>
      <LI>
	Revert Glyph didn't work. One bug caused by multilayer, one caused by encoding
	changes, and one really old one.
      <LI>
	GetFontNames returned an uninitialized value on bad ttf files.
      <LI>
	Add some new scripting commands to access the TeX per-glyph fields.
      <LI>
	Werner suggested some improvements to tfm output.
      <LI>
	Cleanup behavior of generating ttf bitmaps in a script.
      <LI>
	I was attaching script/langs to lookups when parsing GPOS/GSUB. That wasn't
	good enough. Each sub-table and have it's own set, so attach script/langs
	to subtables as well. Still a flaw in that sub-tables could be referenced
	through severel extension sub-tables or directly and I don't unravel that
	complexity until too late.
      <LI>
	ATM which handles some kerning for otf fonts for Word, does not handle 'kern'
	features where the feature contains more than one lookup. So whenever we
	have a feature with multiple lookups try to compress them into one lookup
	with multiple sub-tables.
      <LI>
	Transform (in fontview) and Scale To Em do not scale the vertical advance.
      <LI>
	We didn't test the right thing when deciding where a subroutine containing
	refs began.
      <LI>
	Remove Undoes was broken by the encoding changes.
      <LI>
	When saving multiple, make sure we don't get extraneous kerns. (to glyphs
	not in the current sub-font).
      <LI>
	Make sure the blue lines (marking hints needing to be updated) get cleared
	properly.
      <LI>
	Some display problems in the SameGlyphAs command.
      <LI>
	The Apply Substitutions code did not consider the possibility of loops:<BR>
	a-&gt;b-&gt;c-&gt;d-&gt;a
      <LI>
	Werner suggests indicating multi-layer in the version string.
      <LI>
	Mark to Mark anchor classes should allow each mark glyph also to contain
	a base mark entry.
      <LI>
	Give unicode name data (in grey) for dotted names. (ie for A.super give unicode
	name data for "A", but in grey so it stands out as modified).
      <LI>
	Add scripting routines to detach glyphs from the encoding and to remove them
	from the font.
      <LI>
	FF produced some very strange 'gasp' tables... depending on the bitmap fonts
	in the sfd and not on the bitmaps in the output ttf for one thing.
      <LI>
	Werner wants an Invert Selection command.
      <LI>
	The position of Coptic and Glagolithic has been shifted in Unicode 4.1 (shifted
	from some earlier proposal).
      <LI>
	Patch by KANOU, ttc files were broken.
      <LI>
	Some english language strings in the ttfnames pane of fontinfo where sort
	of bound to equivalent fields in the names pane. Make this clearer, and
	consistent.
      <LI>
	Werner thinks my error messages for scripts should be improved.
      <LI>
	Add a check in case sfd files contain unreasonable values for pixelsize,
	etc.
      <LI>
	Werner suggests a --dry <scriptfile> argument which does syntax checking
	without actually executing the script. I think it is trivial.
      <LI>
	Werner points out that the DSC Version comment has a very specific syntax:<BR>
	%%Version: <version> <revision><BR>
	<version> is a real, <revision> is a uint. So we can't use the font's version
	string here (which might be anything). Instead we now generate a version
	comment<BR>
	%Version: <string><BR>
	rather than a DSC Comment.
      <LI>
	We used to assign a unicode value to ".notdef"s when reading ps encoding
	file, if the encoding was in the region of control chars (so location 1 would
	get uni0001, while location 65 would get -1). Seems inconsistent.
      <LI>
	Oops. I failed to provide a mechanism to add other iconv encoding names into
	my menu.
      <LI>
	Code to support group display.
      <LI>
	Was not reading ps encoding files properly.
      <LI>
	Remove encoding should always be available.
    </UL>
  <LI>
    19-July-2005
    <UL>
      <LI>
	Extend to Unicode 4.1
      <LI>
	Change to configuration system to allow relative pathspecs for
	--with-freetype-src didn't work.
      <LI>
	Context chain dlg had problems with empty patterns (no terminal NUL in empty
	string used to represent them)
      <LI>
	The [EditData] button in contextual fontinfo pane was disabled due to reasons
	which are no longer valid..
      <LI>
	Transforming by a negative scale factor screwed up the hints.
      <LI>
	Add move up/down buttons to the kerning class dlg (class lists area) Use
	the selection from the class lists to highlight offsets.
      <LI>
	Print sample did not handle kerning by classes.
      <LI>
	When we had: a glyph which contained refs where that glyph was itself used
	as a reference in another glyph and all glyphs (except the last) lived in
	subroutines then we got multiple declarations of hints and the middle glyph
	was translated from where it should have been.
      <LI>
	When changing lists they should not scroll back to the beginning.
      <LI>
	Various fixes regarding hints: changing hints should set the char changed
	flag changing a glyph should mark all glyphs that refer to it as having out
	of date hints display out of date hints in font view. hints weren't being
	preserved (and should have been) in charview in Paste and transform.
      <LI>
	Apply Substitutions was badly broken when ff compiled with multilayer.
      <LI>
	Kern Pair dlg looked at garbage memory when it closed (and crashed sometimes).
      <LI>
	ff decides whether to add a 'gasp' table to a font based on whether the font
	has instructions or not. ff's own ttf fonts contain instructions in .notdef
	but nowhere else, so ignore .notdef when making this check.
      <LI>
	One more attempt to rule out absurd results in simplify().
      <LI>
	if the lsb/rsb dlg was given a negative value it complained about negative
	widths. (whether the width would have been negative or not).
      <LI>
	$italicangle has been broken since I added reals to scripting.
      <LI>
	The kernclass dialog did not handle deleted classes properly.
      <LI>
	Add ability to undo hints.
      <LI>
	Once again starting a browser on windows is broken.
      <LI>
	We didn't do a bounds check when indexing into the names array of an encoding
	(when building a character from scratch). If the index was huge the result
	was garbage, generally leading to a crash sometime thereafter.
      <LI>
	An open path consisting of a single point caused replace with reference to
	crash.
      <LI>
	Generating a postscript resource font on the mac from a script did not work.
      <LI>
	Werner points out that afm files generated by FontForge still claim to have
	been made by pfaedit. Oops.
      <LI>
	Didn't parse user defined encodings properly and often omitted the first
	glyph.
    </UL>
  <LI>
    24-June-2005
    <UL>
      <LI>
	Improvements in the way type42 fonts where handled in printing.
      <LI>
	Fix a crash when parsing mangled cff files
      <LI>
	Marvelous triple bug:
	<UL>
	  <LI>
	    Adobe's Tech Note 5176 (cff format) says that a private dict is required.
	    They mean it's required in a type1 font.
	  <LI>
	    Because of this I put a null private dict entry into my cid cff fonts.
	  <LI>
	    ghostview finds the null private dict entry and tries to read data from it
	    even though it is of 0 length.
	</UL>
      <LI>
	Add postscript code necessary for loading a cff font to my cff font output.
      <LI>
	Fix some uninitialized variables in the display dlg.
      <LI>
	We didn't get DSC pages properly when printing a CID keyed font.
      <LI>
	The default (notdef) glyph generated by my palm output routines was a little
	wonky.
      <LI>
	The rle image reader in my sfd routines had an off by one error causing it
	to reject some images.
      <LI>
	We used to munch memory when loading empty glyphs from mac NFNT resources.
      <LI>
	It used to be that we didn't set the default background until the first font
	view window was opened. This meant that if we loaded a grey scale bitmap
	before opening a window (ie. from the command line) then that bitmap's clut
	would be relative to white rather than the appropriate background.
      <LI>
	Add some code to protect against badly generated bitmap strikes in sfnts.
      <LI>
	vhea &amp; vmtx tables were generally wrong in otf fonts (unless the last
	full vmetric happened to be the last full hmetric). Also fix problems with
	cid hmtx output.
      <LI>
	The sfd reader looked in the wrong place for sli information in cid keyed
	fonts.
      <LI>
	Damn. Default output (for stdout) encoding never gets initialized when in
	a script.
      <LI>
	I realized a few months ago that there is a difference between encodings
	based on names and encoding based on unicode codepoints. Unfortunately I
	was only saving encodings as though they were based on names (generating
	default names if necessary). This patch retains the distinction even when
	encodings are saved to the preferences folder.
      <LI>
	AddAccent behaved differently when passed a glyphname and a unicode code
	point. In the first case it used the glyph specified. In the second it performed
	an arcane search which would not always use the specified glyph (left over
	from the days when it was important to use a glyph in Adobe Standard so you
	could do a seac).
      <LI>
	When debugging composite glyphs ff failed to notice when we switched from
	one glyph to another and so failed to reset the instruction list to those
	of the new glyph.
      <LI>
	Problem with cubic to quadratic spline approximation. Fixed by a more careful
	comparison between original and resulting spline.
      <LI>
	Kerning (and Anchor positioning) didn't work when printing to pdf.
      <LI>
	Won-kyu Park points out that ff's internal utf7 parser (deep in the guts
	of sfd.c) only parses utf7 strings as produced by ff. He took a utf7 string
	produced by python and inserted it and ff could not read it. He provides
	a patch to fix the problem.
      <LI>
	If we got an invalid second order spline, let's fix it up into some vaguely
	reasonable form, so the poor user doesn't keep getting errors.
      <LI>
	Extra "-" in type42 header removed.
      <LI>
	The anchor dialog was all screwed up.
      <LI>
	The test in show att that all components of a substitution existed failed
	to handle a trailing space.
      <LI>
	Make page Up/Down work in Show ATT
      <LI>
	Sometimes the simplify algorithem fails to converge.
      <LI>
	When generating a tfm file the width (height, depth, ic) table was being
	scaled twice.
      <LI>
	Remove a NaN that occurred when moving quadratic splines.
      <LI>
	Oops. The unicode code point of a glyph was restricted to BMP by Glyph Info
	dlg.
      <LI>
	Werner gave me a font where the glyphs were not properly ordered. So you
	can't tell the length of a glyph by loca[i+1]-loca[i]. The data appear valid
	in spite of that. So put in a warning for this particular case (we were
	generating a warning, but it wasn't as meaningful as it might be.)
      <LI>
	Make View-&gt;Show ATT aware of the mark attachment class info so it can
	show the classes.
      <LI>
	When interpolating to quadratic fonts where the two designs didn't match
	then the various possible errors gave us bad splines: Different numbers of
	points on the paths meant that the control points at the end (after we reached
	the end of the contour in one design but not the other) didn't match. Different
	designs meant that interpolating a line (with no control points) to a curved
	spline again produced nasties.
      <LI>
	Drag and drop was broken.
      <LI>
	Extend lookup flags support to include mark attachment classes (as defined
	in GDEF).
      <LI>
	Bad argument type checking on the AddAccent scripting command.
      <LI>
	Infinite loop in a rare case involving a flex hint at the start of a contour.
      <LI>
	The merge fonts command would crash.
      <LI>
	Problems parsing some bare cff fonts.
    </UL>
  <LI>
    2-May-2005
    <UL>
      <LI>
	Add support for Mark Classes.
	<UL>
	  <LI>
	    New pane in Font Info to create them
	  <LI>
	    New field in the feature tag dlg to use them
	  <LI>
	    Input/Output routines
	</UL>
      <LI>
	Drag and drop was broken
      <LI>
	Infinite loop in some bizarre cases when generating a hinted opentype font.
      <LI>
	The Merge Fonts command was broken
      <LI>
	The scripting command: AddAccent checked for the wrong argument type
      <LI>
	ff generated an error when loading some bare cff fonts.
      <LI>
	Store desired fontview sizes in prefs file
      <LI>
	Add a tweak to make the mac's dynamic loader look for fink libraries
      <LI>
	Problems parsing bare cff cid-keyed fonts
      <LI>
	recognize that code page 932 is a variant of SJIS
      <LI>
	The feature tag 'nutf' is an obsolete name for 'afrc'
      <LI>
	Add a couple of new scripting functions
	<UL>
	  <LI>
	    Int() which casts its real/int/unicode argument to int
	  <LI>
	    UCodePoint() which casts its real/int/unicode argument to unicode
	</UL>
      <LI>
	scripting CharInfo no longer creates the glyph it is asked about
      <LI>
	WorthOutputting/DrawsSomething can now be applied to the current selection
      <LI>
	When using the freetype rasterizer don't do an automatic close of open paths.
      <LI>
	For SCWorthOutputting I used to check both that !widthset and width==em-size.
	Remove the em-size check, should be redundant and somethimes (marks) is wrong.
      <LI>
	The various FindBounds routines didn't pad stroked fonts appropriately
      <LI>
	Discrepency in docs and code on spelling of scripting Auto[tT]race command.
	Accept both variants
      <LI>
	A debug statement was left in the ps interpreter
      <LI>
	Make the help command look for japanese docs in the ja locale
      <LI>
	Add a select fewer scripting command
      <LI>
	Fix some problems with custom encodings
      <LI>
	Support '\r' and '\r\n' as line-endings for backslash continuation
      <LI>
	New version of Japanese UI
      <LI>
	The kerning pair dlg would sometimes fail to display a pair when searching
	on the second char of the pair.
      <LI>
	Danish translation of some style names, courtesy of Anders Lund
      <LI>
	Fix some problems with SJIS encoding
      <LI>
	The point info dlg was quite unusable if you typed in somethng which wasn't
	a number
      <LI>
	When in debug mode display pointer position in pixels
      <LI>
	Point Info had problems with order2 splines
      <LI>
	The instruction pane of the debug window was interpretting keystrokes it
	should not have
      <LI>
	Peter Selinger has changed the way potrace is built so it no longer uses
	cygwin (it uses MinGW instead). This means ff can't pass it the name of a
	temp file as '/tmp/foo' because (on windows) /tmp is a cygwin fiction. So
	continue to put the file on cygwin's /tmp, but cd to that directory and then
	pass the bare filename.
      <LI>
	Add some more greek PUA small caps
      <LI>
	Add scroll bars to debug windows which lacked them
      <LI>
	Add a gloss window which explains what a ttf instruction is going to use
	and what it is going to do.
      <LI>
	Was using the wrong accent to build cyrillic breves.
      <LI>
	Remove the adobe private use defs from libgunicode and put them in fontforge.
      <LI>
	ff had problems reading pfm files containing kerning pairs using non-existant
	chars
      <LI>
	Add pixels per em in register view.
      <LI>
	No contours in twilight zone
      <LI>
	When generating tt fonts we did not set bit 8 in 'head'.Flags. This gives
	bad results when ppem is not an integer
      <LI>
	When reencoding to adobe standard (or any encoding where glyph names are
	more important than code points) make sure we use glyph names rather than
	code points (so "f_i" is not in AdobeStd while "fi" is. But they map to the
	same code point).
      <LI>
	When creating a debug window in a glyph with no instructions (or in which
	'gasp' has turned off hinting) we used not to rasterize it.
      <LI>
	Script/lang count was wrong in a number of places
      <LI>
	Oops, the transform dlg and menu both used the "round to int" string. Then
	I changed what it looked like in the menu, a change which is not appropriate
	for the transform dlg. Add a new string just for the dlg.
      <LI>
	Tavmjong Bah added something to the "ypogegrammeni" list.
      <LI>
	Fix problems with multiple text fields in the same window all wanting input
	contexts (for input methods).
      <LI>
	We generated ligature code in morx for ligatures that were not worth outputting.
      <LI>
	Pierre Hanser points out that a recent change to SetWidth broke the scritping
	SetWidth command.
      <LI>
	Yet more effort to remove rounding errors from remove overlap. If a control
	point causes a slight overshoot we get an unexpected extremum very close
	to one of the endpoints. If it's close enough this can cause problems. Tweak
	cps so this does not happen
      <LI>
	Solaris stores isnan &amp; friends in ieeefp.h not in math.h
      <LI>
	Add scripting access to standard math functions (trig, exp log)
      <LI>
	Unary minus didn't work on reals
      <LI>
	The recalculate bitmaps button in bitmap view was getting munched when we
	updated the cursor position.
      <LI>
	CharInfo("BBox") returned gibberish
    </UL>
  <LI>
    9-Mar-2005
    <UL>
      <LI>
	Deleting a glyph class within a kerning by classes object caused a crash
      <LI>
	Added some support for palm bitmap fonts
      <LI>
	Replace with reference only replaced the first instance.
      <LI>
	The Options dlg behaved oddly with respect to Apple &amp; OpenType modes
      <LI>
	When given a glyph with conflicting hints for which the first contour contained
	no hints, then in type2 output the glyph was drawn at a strange offset from
	its correct position.
      <LI>
	When generating an opentype font from a script, and specifying flags, the
	round coordinates flag was ignored
      <LI>
	When generating a font from a script using the default flag setting, we would
	always generate afm/tfm/pfm files
      <LI>
	KANOU pointed out that the stroked font import glyph command only worked
	if multilayer set.
      <LI>
	Added a preview bitmap to eps files.
      <LI>
	In a bitmap only font the font metrics menu items behaved in unexpected ways
	(as if they referred to a postscript font rather than the bitmap fonts)
      <LI>
	Various fixes to make importing stroked eps files into stroked fonts work
	better.
      <LI>
	KANOU requests a preference item to turn off use of freetype in font view.
      <LI>
	Fix more rounding errors in remove overlap.
      <LI>
	Fix some problems in the routine which finds roots of an arbetrary quartic.
      <LI>
	The remove bump option of simplify could screw up memory.
      <LI>
	Remove overlap got unhappy about control points which caused a very tiny
	overlap between adjacent splines
      <LI>
	Redo from the fontview usually caused a crash.
      <LI>
	KANOU provides a MakeLine scripting command
      <LI>
	If TYPE3 (multilayer) was not enabled, there was a flow of control through
	a function which did not return anything.
      <LI>
	Recovery files did not contain multilayer marks which lead to strange behavior
	and crashes
      <LI>
	Converting a font to multilayer caused a crash if there were outline glyph
	windows open.
      <LI>
	Make the encoding for scripts be utf8 consistently
      <LI>
	Allow the scripting Export command to take a format spec
      <LI>
	Add support for reals to the scripting language
      <LI>
	NearlyHv{Cps,Lines} scripting commands erroneously complained about too many
	args
      <LI>
	ff had a bug when outputting otf contextual ligatures
      <LI>
	Fix various crashes and infinite loops involved in parsing bad font files.
      <LI>
	ff had problems with user defined encodings.
      <LI>
	Made ff work if the psuedo-type "real" was defined to be a double.
      <LI>
	the string += concattonation operator in scripting screwed up memory
      <LI>
	Problems with -c &lt;arg&gt; syntax
      <LI>
	The font type detector could fail to notice an svg file as such if it began
	with a byte order character.
      <LI>
	Ord didn't do proper type checking on its second argument
    </UL>
  <LI>
    9-Feb-2005
    <UL>
      <LI>
	Use freetype's FT_Outline_Get_Bitmap to make freetype rasterize from our
	internal data structures. Use freetype by default for the fontview and
	metricsview (except in some cases).
      <LI>
	The bitmap dlg didn't work for multilayered fonts when told to use freetype
	to rasterize.
      <LI>
	If we had a contour nested inside another, and did an Overlap Exclude with
	the nested contour selected, then that contour was not excluded.
      <LI>
	The []Correct Direction check box when importing PostScript, didn't do anything.
	(or rather it did, but got overrulled later)
      <LI>
	In bitmap only fonts, bitmaps created without moving the width line would
	get lost.
      <LI>
	Added a scripting command "SelectByColor"
      <LI>
	Don't apply transformations to glyphs which aren't worth outputting
      <LI>
	Moving control points with the get point info command had problems in quadratic
	splines.
      <LI>
	When adding type42 support I broke multiple master support.
      <LI>
	Werner provided a patch to add a trailing newline to my type1 fonts.
      <LI>
	Support for PaintType==2 and stroked fonts.
      <LI>
	Various problems with the clustering command
      <LI>
	Oops, somehow a patch reverted and things didn't work on systems without
	iconv
      <LI>
	worked on a couple of other configuration problems for the mac
      <LI>
	Some people install libraries without headers. Be prepared.
      <LI>
	Uniscribe (MS unicode text layout routines) may ignore either the GPOS or
	the GSUB table depending on the script, and may even refuse to use the font
	at all if it doesn't have the right stuff in GPOS/GSUB. A Hebrew font must
	have both a GPOS and a GSUB. If it doesn't the font is not used. A latin
	font need not have either, but if it doesn't have GSUB then GPOS won't be
	used.
	<P>
	Sergey Malkin from MicroSoft tells me:
	<BLOCKQUOTE>
	  Each shaping engine in Uniscribe can decide on its requirements for layout
	  tables - some of them require both GSUB and GPOS, in some cases any table
	  present is enough, or it can work without any table.
	  <P>
	  Sometimes, purpose of the check is to determine if font is supporting particular
	  script - if required tables are not there font is just rejected by this shaping
	  engine. Sometimes, shaping engine can not just reject the font because there
	  are fonts using older shaping technologies we still have to support, so it
	  uses some logic when to fallback to legacy layout code.
	  <P>
	  In your case this is Hebrew, where both tables are required to use OpenType
	  processing. Arabic requires both tables too, Latin requires GSUB to execute
	  GPOS. But in general, if you have both tables you should be safe with any
	  script to get fully featured OpenType shaping.
	</BLOCKQUOTE>
	<P>
	So the script sub-table of both GPOS/GSUB should contain all scripts used
	in either (rather than just the scripts used in the current one).
      <LI>
	The AddATT scripting command didn't understand Nested.
      <LI>
	Add a cli argument "-c" to introduce a scripting command in an argument.
      <LI>
	Someone ran ff on a solaris box without iconv. (Odd because iconv is there
	by default). FF ran fine (Odder, why didn't it demand the library?), but
	crashed when it tried to use a conversion which didn't exist.
      <LI>
	There's another ASCII map in Unicode (0xe0000-0xe007f).
      <LI>
	Allow user to supply their own OtherSubrs routines (Some people object to
	Adobe's copyright).
      <LI>
	Codes to handle identifying a loaded font by relative filespec didn't work.
      <LI>
	Change Add Extrema so that it only adds extrema if
	<OL>
	  <LI>
	    The spline length is &gt;= em_size/32
	  <LI>
	    The extremum is an extremum of the entire contour containing the spline.
	</OL>
	<P>
	(Behavior in the outline view when there is a selection remains the same.
	So if the endpoints of a spline are both selected then all local extrema
	will be added to that spline, no matter how long it may be).
      <LI>
	Patch by Ralf Stubner. Fonts without UniqueID had a bad syntax.
    </UL>
  <LI>
    17-Jan-2005
    <UL>
      <LI>
	CapsLock now makes the arrow keys scroll in the outline view
      <LI>
	We lost count of hints when generating type2 fonts in glyphs with references
	to something containing hints which did not overlap. If we were unlucky,
	&lt;new-cnt+7&gt;/8 was different than &lt;real-cnt+7&gt;/8 and we ended
	up with garbage in the charstring.
      <LI>
	Add a TeX table to contain TeX metrics.
      <LI>
	TFM output was wrong. the TFtoPL doc says "
      <LI>
	reencoding with original encoding could create a glyph table one too small
	resulting in writing/reading garbage and an eventual crash.
      <LI>
	KANOU fixed a couple of problems in reading glyph names from bdf fonts.
      <LI>
	KANOU needed to disambiguate between "Point" a unit of measurement and "Point"
	a geometric object.
    </UL>
  <LI>
    16-Jan-2005
    <UL>
      <LI>
	Added support for OpenType Device Tables (These allow you to add small
	corrections to things like kerning at a given point size. Often at small
	point sizes kerning and advance widths will round in such a way as to produce
	unpleasing results. Device tables allow you to correct for that).
      <LI>
	Add dialogs for kerning pairs and anchors to allow users to set device tables.
	Extend dlg for kerning classes for this.
      <LI>
	Neil Parker suggested a patch for panose values that didn't apply to latin
	fonts
      <LI>
	Doing a Get Info on a single point caused a crash on the mac
      <LI>
	Further attempts to improve spline approximation, underlying Merge &amp;
	Simplify commands
      <LI>
	Relaxed simplify's definition of parallel so it will merge a few more straight
	lines.
      <LI>
	Make the behavior of Simplify More consistant across font/outline view. Simplify
	More can now set the default behavior for future simplify commands.
      <LI>
	Provide a menu command to round to hundredths of a em-unit
      <LI>
	Add a new facility to cluster coordinates to the same value. Useful as a
	prepass to Remove Overlap.
      <LI>
	Bug reading ligature data from a tfm file
      <LI>
	Add support for GPOS 'size' feature. Create a 'size' pane of the fontinfo
	dlg
      <LI>
	Replace with Reference had an interesting flaw. Consider the open and closed
	bullet characters. If the (single) contour in closed bullet matched the outer
	contour in open bullet then it would replace it with a reference. But this
	is incorrect as the two contours of open bullet need to be treated as a unit.
      <LI>
	Could get a bad memory reference in the font view if the mouse were to extend
	the selection outside of the window.
      <LI>
	Add a scripting function to return whether a file exists.
      <LI>
	In a Type1 font, if a glyph had no conflicting hints (and no flex hints)
	and got put in a subroutine, then we'd get no hints at all.
      <LI>
	Be more willing to generate format12 cmap subtables (unicode, non-bmp tables)
    </UL>
  <LI>
    6-Jan-2005
    <UL>
      <LI>
	New Copyright message, etc. Get rid of pfaedit message.
      <LI>
	Simplify produced strange results on quadratic splines.
      <LI>
	Simplify had problems with tangent points
      <LI>
	Changing a point's type from a tangent to a curve usually had unexpected
	results.
      <LI>
	Add a warning message in remove overlap when user passes us two intersecting
	contours which are oriented in oposite directions. Unfortunately it also
	complains about some other things.
      <LI>
	The 18 Dec changes to remove overlap introduced an infinite loop in some
	rare cases. (When there is a gradient of 0 in distance function between two
	splines).
      <LI>
	In a conditional operator (like &amp;&amp; or ||) in scripting where the
	second operand was not evaluated and the second operand contained a procedure
	call, then ff would crash
      <LI>
	Tweaked the point info dialog to show small offsets better
      <LI>
	Tweaked the merge command to behave better when merging tiny spline segments
	(where the length of the spline segment is so small that it should just be
	treated as a zero length spline and its slope ignored).
      <LI>
	Added an "Invert selection" command to the outline view, from Yoshiki Hayashi
      <LI>
	Pasting from the font view did not clear a glyph's instructions.
      <LI>
	New version of AutoHint. I've removed Diagonal Stem hints and mimum distance
	hints for now.
    </UL>
  <LI>
    <A HREF="oldchangelog.html">Earlier Changes </A>
  <LI>
    <A HREF="pfaeditchangelog.html">Changes to PfaEdit (predecessor to
    FontForge)</A>
</UL>
</BODY></HTML>
