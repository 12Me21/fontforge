<HTML>
<HEAD>
  <!-- Created with AOLpress/2.0 -->
  <!-- AP: Created on: 29-Dec-2002 -->
  <!-- AP: Last modified: 8-Feb-2003 -->
  <TITLE>Advanced Typography tables</TITLE>
</HEAD>
<BODY>
<H1 ALIGN=Center>
  Advanced Typograph Tables
</H1>
<P>
These differ between OpenType and Apple. My support for Apple is minimal
as yet. My support for OpenType is not complete.
<UL>
  <LI>
    <A HREF="#opentype">The <B><CODE>GPOS</CODE></B>,
    <B><CODE>GSUB</CODE></B> and <B><CODE>GDEF</CODE></B> opentype tables</A>
  <LI>
    <A HREF="#AAT">Apple Advanced Typography</A>
</UL>
<H2>
  The <B><CODE>GPOS,</CODE></B> <B><CODE>GSUB</CODE></B> and
  <B><CODE>GDEF</CODE></B> <A NAME="opentype">opentype</A> tables
</H2>
<P>
These two tables are used for positioning and substituting glyphs. The GPOS
table can control things like: kerning, accent positioning, cursive joining,
etc. The GSUB table can control things like: ligatures, arabic forms, vertical
rotation, conversion to small caps, indic glyph rearangment, etc.
<P>
This page assumes basic familiarity with the abilities of the tables, for
more information on them read, study and inwardly digest the opentype docs
on:
<UL>
  <LI>
    <A HREF="http://partners.adobe.com/asn/developer/opentype/appendices/chapter2.html">The
    header for both GPOS and GSUB</A>
  <LI>
    <A HREF="http://partners.adobe.com/asn/developer/opentype/gpos.html">The
    GPOS table</A>, for positioning glyphs
  <LI>
    <A HREF="http://partners.adobe.com/asn/developer/opentype/gsub.html">The
    GSUB table</A>, for substituting glyphs
  <LI>
    <A HREF="http://partners.adobe.com/asn/developer/opentype/gdef.html">The
    GDEF table</A>, for classifying glyphs and for providing a ligature caret
    table
  <LI>
    <A HREF="http://partners.adobe.com/asn/developer/opentype/appendices/feattags.html">The
    list of feature tags supported by opentype</A>
  <LI>
    <A HREF="http://partners.adobe.com/asn/developer/opentype/appendices/scripttags.html">The
    list of script tags supported by opentype</A>
  <LI>
    <A HREF="http://partners.adobe.com/asn/developer/opentype/appendices/languagetags.html">The
    list of language tags supported by opentype</A> (PfaEdit does not currently
    support languages)
</UL>
<P>
The basic idea of the GPOS and GSUB tables is that each script (or language
within a script) has a set of "features" that are available to it. A feature
in turn is associated with a lookup which contains data for the feature.
An example of a script is 'latn' for latin, 'arab' for arabic, 'hani' for
chinese ideographs. Two examples of features are 'kern' which provides kerning
information between pairs of glyphs and 'init' which will transform one set
of glyphs to another when those glyphs are at the beginning of a word.
<P>
PfaEdit does not support the full range of possibilities inherent in these
tables.
<H3>
  The <B><CODE><A NAME="GPOS">GPOS</A></CODE></B> table
</H3>
<P>
PfaEdit will read the following sub tables of the GPOS table:
<TABLE Border=1>
  <TR>
    <TD>1</TD>
    <TD>single adjustment</TD>
    <TD>This sub-table allows the font designer to change the metrics of a specific
      character. The feature tag will provide a context in which the change should
      occur. For instance the 'tnum' (tabular numbers) feature could change a
      proportionally spaced digit by adjusting its advance width to be some set
      value and then centering the digit (by adjusting the left side bearing) within
      the new width.</TD>
    <TD>These can be created with the <A HREF="charinfo.html">Element-&gt;Char
      Info</A>-&gt;Position command.</TD>
  </TR>
  <TR>
    <TD>2</TD>
    <TD>pair adjustment</TD>
    <TD>This sub-table allows the font designer to change the metrics of a specific
      pair of character. The most common use of this is for kerning where the advance
      width of the first character is altered depending on which character follows
      it. But the table is more general than that and could support mark (accent,
      vowel) positioning over a base character (though that is more efficeintly
      done with the mark to base subtable).</TD>
    <TD>Only the 'kern' feature is supported for this sub-table. These may be
      created from the <A HREF="metricsview.html">Metrics View</A></TD>
  </TR>
  <TR>
    <TD>3</TD>
    <TD>cursive attachment</TD>
    <TD>This sub-table allows the font designer to force adjacent characters
      to join at specific points. It can be used to generate the slanted script
      style needed for Urdu.</TD>
    <TD>Only the 'curs' feature is supported for this sub-table. These may be
      created with the <A HREF="pointmenu.html#AddAnchor">Points-&gt;Add Anchor</A>
      command</TD>
  </TR>
  <TR>
    <TD>4</TD>
    <TD>mark to base</TD>
    <TD>This sub-table allows the font designer to specify how mark characters
      (accents, vowel signs, etc.) are positioned over base characters. Every character
      can have an attachment point and the mark's attachment point will be placed
      on the base's attachment point so the two join properly. See my
      <A HREF="overview.html#Anchors">example</A> in the overview.</TD>
    <TD>These may be created with the
      <A HREF="pointmenu.html#AddAnchor">Points-&gt;Add Anchor</A> command</TD>
  </TR>
  <TR>
    <TD>5</TD>
    <TD>mark to ligature</TD>
    <TD>This sub-table is very similar to the previous one except that the base
      character is a ligature and may have several different points at which the
      same type of accent may be placed.</TD>
    <TD>These may be created with the
      <A HREF="pointmenu.html#AddAnchor">Points-&gt;Add Anchor</A> command</TD>
  </TR>
  <TR>
    <TD>6</TD>
    <TD>mark to mark</TD>
    <TD>This sub-table is very similar to the previous two except that the base
      character is itself a mark. This may be used when a character has two accents
      each of which would normally be placed at the same attachment point on a
      base character. The second accent will be place relative to the first accent
      rather than to the base character.</TD>
    <TD>These may be created with the
      <A HREF="pointmenu.html#AddAnchor">Points-&gt;Add Anchor</A> command</TD>
  </TR>
  <TR>
    <TD>7</TD>
    <TD>contextual positioning</TD>
    <TD>This sub-table allows the font designer to control the positioning of
      characters when they occur within a specific string (or class of strings).
      For instance this table could say "when you see a digit followed by the string
      "th" then raise the "th" into a superscript position"</TD>
    <TD>PfaEdit does not support this sub-table yet.</TD>
  </TR>
  <TR>
    <TD>8</TD>
    <TD>chaining contextual positioning</TD>
    <TD>I haven't figured this one out yet</TD>
    <TD>PfaEdit does not support this sub-table yet.</TD>
  </TR>
  <TR>
    <TD>9</TD>
    <TD>extension positioning</TD>
    <TD>This is used to allow for a GPOS table which is bigger than 64k. Its
      use should be quite invisible to the font designer</TD>
    <TD>PfaEdit should support this sub-table but I haven't seen a font big enough
      to need it to test.</TD>
  </TR>
  <TR>
    <TD>10+</TD>
    <TD>reserved for future use</TD>
    <TD></TD>
    <TD>PfaEdit does not support these sub-tables yet.<BR>
      (nor does anyone)</TD>
  </TR>
</TABLE>
<P>
PfaEdit also has built into it knowledge on how to provide default values
for some features that use these menus. See
<A HREF="elementmenu.html#DefaultATT">Element-&gt;Default ATT</A> command
for that.
<H3>
  The <B><CODE><A NAME="GSUB">GSUB</A></CODE></B> table
</H3>
<P>
PfaEdit will read the following sub tables of the GSUB table:
<TABLE Border=1>
  <TR>
    <TD>1</TD>
    <TD>single substitution</TD>
    <TD>This sub-table allows the font designer to change from one glyph to another,
      with a context provided by the feature tag. For example many scripts have
      letters which have a different form at the end of a word than they do within
      (this is true of every letter in arabic, several in hebrew, lower case sigma
      in greek, and the long-s/short-s pair in renaissance latin). So the 'fina'
      feature would map the normal form into the final form, and the word processing
      program would do a lookup at the end of each word to see if a transformation
      was needed.</TD>
    <TD>These can be created with the <A HREF="charinfo.html">Element-&gt;Char
      Info</A>-&gt;Substitution command.</TD>
  </TR>
  <TR>
    <TD>2</TD>
    <TD>multiple substitution</TD>
    <TD>This sub-table allows the font designer to replace one glyph by a series
      of others. This is generally used for rather technical layout issues.</TD>
    <TD>These can be created with the <A HREF="charinfo.html">Element-&gt;Char
      Info</A>-&gt;Multiple Substitution command.</TD>
  </TR>
  <TR>
    <TD>3</TD>
    <TD>alternate substitution</TD>
    <TD>This sub-table allows the font designer to have a series of "alternates"
      for each glyph. One common example would be an italic font which had several
      swash variants for each capital letter. The word processing program would
      allow the user to choose which variant was appropriate</TD>
    <TD>These can be created with the <A HREF="charinfo.html">Element-&gt;Char
      Info</A>-&gt;Alternate Substitution command.</TD>
  </TR>
  <TR>
    <TD>4</TD>
    <TD>ligature substitution</TD>
    <TD>This sub-table allows the font designer to replace a string of characters
      with another glyph. A common example is a ligature where the string
      <IMG SRC="f+i.png" WIDTH="24" HEIGHT="25" ALIGN="Middle"> is replaced by
      the <IMG SRC="fi.png" WIDTH="20" HEIGHT="25" ALIGN="Middle"> ligature.</TD>
    <TD>These can be created with the <A HREF="charinfo.html">Element-&gt;Char
      Info</A>-&gt;Ligature command.</TD>
  </TR>
  <TR>
    <TD>5</TD>
    <TD>contextual substitution</TD>
    <TD>This subtable allows for a string of glyphs to replace another string
      of glyphs (or class of strings of glyphs)</TD>
    <TD>PfaEdit does not support this sub-table yet.</TD>
  </TR>
  <TR>
    <TD>6</TD>
    <TD>chaining contextual substitution</TD>
    <TD>I haven't figured this one out yet</TD>
    <TD>PfaEdit does not support this sub-table yet.</TD>
  </TR>
  <TR>
    <TD>7</TD>
    <TD>extension positioning</TD>
    <TD>This is used to allow for a GSUB table which is bigger than 64k. Its
      use should be quite invisible to the font designer</TD>
    <TD>PfaEdit should support this sub-table but I haven't seen a font big enough
      to need it to test.</TD>
  </TR>
  <TR>
    <TD>8</TD>
    <TD>reverse chaining contextual single substitution</TD>
    <TD>I haven't figured this one out yet</TD>
    <TD>PfaEdit does not support this sub-table yet.</TD>
  </TR>
  <TR>
    <TD>9+</TD>
    <TD>reserved for future use</TD>
    <TD></TD>
    <TD>PfaEdit does not support these sub-tables yet.<BR>
      (nor does anyone)</TD>
  </TR>
</TABLE>
<P>
PfaEdit also has built into it knowledge on how to provide default values
for some features that use these menus. See
<A HREF="elementmenu.html#DefaultATT">Element-&gt;Default ATT</A> command
for that.
<P>
PfaEdit can produce some of these tables, but the text layout/word processing
program used has to look up the tables and do the actual work of rearranging
the glyphs.
<H3>
  The <B><CODE><A NAME="GDEF">GDEF</A> </CODE></B>table
</H3>
<P>
PfaEdit will read ligature carets out of a GDEF table.
<P>
It will generate a GDEF table containing a glyph class definition sub-table
(if needed) or a ligature caret sub-table (if needed).
<H2>
  <A NAME="AAT">Apple</A> Advanced Typography
</H2>
<P>
PfaEdit will current read and produce (if Apple mode is set in font generation)
the following tables:
<TABLE BORDER CELLPADDING="2">
  <CAPTION>
    Apple tables corresponding vaguely to <A HREF="#GDEF">GDEF</A>
  </CAPTION>
  <TR>
    <TD><CODE>'lcar'</CODE></TD>
    <TD>ligature caret table</TD>
    <TD>PfaEdit will read ligature carets</TD>
    <TD>PfaEdit will produce this table if the user has specified ligature carets</TD>
  </TR>
  <TR>
    <TD><CODE>'prop'</CODE></TD>
    <TD>glyph properties table</TD>
    <TD>PfaEdit will read this table to figure out which glyphs are hebrew and
      arabic, and which have 'r2la' substitutions.</TD>
    <TD>PfaEdit will generate this table if the font contains some right to left
      characters.</TD>
  </TR>
</TABLE>
<P>
<TABLE BORDER CELLPADDING="2">
  <CAPTION>
    Apple tables corresponding vaguely to <A HREF="#GPOS">GPOS</A>
  </CAPTION>
  <TR>
    <TD><CODE>'kern'</CODE></TD>
    <TD>kerning table</TD>
    <TD>PfaEdit will read pairwise horizontal kerning</TD>
    <TD>PfaEdit will produce this if the font contains kerning data</TD>
  </TR>
  <TR>
    <TD><CODE>'opbd'</CODE></TD>
    <TD>Optical bounds table</TD>
    <TD>PfaEdit will read optical bounds</TD>
    <TD>PfaEdit will produce this table if the user has specified right and left
      bounds</TD>
  </TR>
</TABLE>
<P>
<P>
PfaEdit has minimal support now for the <CODE>'mort'</CODE> and
<CODE>'morx'</CODE> tables (Glyph metamorphasis and extended glyph metamorphasis
tables). These correspond vaguely to the <A HREF="#GSUB">GSUB</A> table.
Note: Currently only feature type/setting combinations which correspond directly
to an open type feature are saved.
<TABLE BORDER CELLPADDING="2">
  <CAPTION>
    Sub tables of <CODE>'mort'</CODE> or <CODE>'morx'</CODE> currently supported
  </CAPTION>
  <TR>
    <TD>0</TD>
    <TD>Indic style rearrangement</TD>
    <TD>Not supported</TD>
    <TD>Not supported</TD>
  </TR>
  <TR>
    <TD>1</TD>
    <TD>contextual glyph substitution</TD>
    <TD>Not supported</TD>
    <TD>Not supported</TD>
  </TR>
  <TR>
    <TD>2</TD>
    <TD>ligature substitution</TD>
    <TD>PfaEdit can read these and stores them as opentype ligatures</TD>
    <TD>PfaEdit will output this sub-table if the font contains supported ligatures.</TD>
  </TR>
  <TR>
    <TD>4</TD>
    <TD>non-contextual glyph substitution</TD>
    <TD>PfaEdit can read these and stores them as opentype simple substitutions</TD>
    <TD>PfaEdit will output this sub-table if the font contains supported
      substitutions.</TD>
  </TR>
  <TR>
    <TD>5</TD>
    <TD>contextual glyph insertion</TD>
    <TD>Not supported</TD>
    <TD>Not supported</TD>
  </TR>
</TABLE>
<P>
<P>
<TABLE BORDER CELLPADDING="2">
  <CAPTION>
    Correspondances between Apple and OpenType features<BR>
    (that I support)
  </CAPTION>
  <TR>
    <TH>Apple Feature Setting</TH>
    <TH>OpenType Feature Name</TH>
    <TH>OpenType Tag</TH>
  </TR>
  <TR>
    <TD>Required Ligatures</TD>
    <TD>Required Ligatures</TD>
    <TD>rlig</TD>
  </TR>
  <TR>
    <TD>Common Ligatures</TD>
    <TD>Standard Ligatures</TD>
    <TD>liga</TD>
  </TR>
  <TR>
    <TD>Rare Ligatures</TD>
    <TD>Discretionary/Historic Ligs.</TD>
    <TD>dlig/hlig</TD>
  </TR>
  <TR>
    <TD>Logo Ligatures</TD>
    <TD></TD>
    <TD>MLOG<A HREF="#mine">*</A></TD>
  </TR>
  <TR>
    <TD>Rebus Pictures</TD>
    <TD></TD>
    <TD>MREB<A HREF="#mine">*</A></TD>
  </TR>
  <TR>
    <TD>Diphthong Ligatures</TD>
    <TD></TD>
    <TD>MDLG<A HREF="#mine">*</A></TD>
  </TR>
  <TR>
    <TD>Square Ligatures</TD>
    <TD></TD>
    <TD>MSLG<A HREF="#mine">*</A></TD>
  </TR>
  <TR>
    <TD>Abbrev. Square Ligatures</TD>
    <TD></TD>
    <TD>MALG<A HREF="#mine">*</A></TD>
  </TR>
  <TR>
    <TD>Fractions</TD>
    <TD>Fractions</TD>
    <TD>frac</TD>
  </TR>
  <TR>
    <TD COLSPAN=3>
	<HR>
    </TD>
  </TR>
  <TR>
    <TD>Vertical Forms</TD>
    <TD>Vertical Rotation 2</TD>
    <TD>vrt2</TD>
  </TR>
  <TR>
    <TD>Monospace numbers</TD>
    <TD>Tabular numbers</TD>
    <TD>tnum</TD>
  </TR>
  <TR>
    <TD>Superscript</TD>
    <TD>Superscript</TD>
    <TD>sups</TD>
  </TR>
  <TR>
    <TD>Subscript</TD>
    <TD>Subscript</TD>
    <TD>subs</TD>
  </TR>
  <TR>
    <TD>Proportional Text</TD>
    <TD>Proportional Widths</TD>
    <TD>pwid</TD>
  </TR>
  <TR>
    <TD>Half-width Text</TD>
    <TD>Half Width</TD>
    <TD>hwid</TD>
  </TR>
  <TR>
    <TD>Full-width Text</TD>
    <TD>Full Width</TD>
    <TD>fwid</TD>
  </TR>
  <TR>
    <TD>Traditional Characters</TD>
    <TD>Traditional</TD>
    <TD>trad</TD>
  </TR>
  <TR>
    <TD>Simplified Characters</TD>
    <TD>Simplified</TD>
    <TD>smpl</TD>
  </TR>
  <TR>
    <TD>JIS 1978 Characters</TD>
    <TD>JIS 1978 Characters</TD>
    <TD>jp78</TD>
  </TR>
  <TR>
    <TD>JIS 1983 Characters</TD>
    <TD>JIS 1983 Characters</TD>
    <TD>jp83</TD>
  </TR>
  <TR>
    <TD>JIS 1990 Characters</TD>
    <TD>JIS 1990 Characters</TD>
    <TD>jp90</TD>
  </TR>
</TABLE>
<P>
<A NAME="mine">*</A> Tags which are entirely in upper case have been added
by me. They do not correspond to any known opentype tag, and are used solely
for supporting macintoys.
<P>
<P ALIGN=Center>
-- <A HREF="generate.html">Prev</A> -- <A HREF="overview.html">TOC</A> --
<A HREF="filemenu.html">Next</A> --
</BODY></HTML>
