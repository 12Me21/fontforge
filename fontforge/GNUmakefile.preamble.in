# -*- Makefile -*-
#
# Support for --with-gnustep-make

libstamp.c: libstamp.pre
	$(SED) -e '1,$$ s/REPLACE_ME_WITH_MAJOR_VERSION/$(FF_VERSION)/'  \
	       -e '1,$$ s/REPLACE_ME_WITH_MINOR_VERSION/$(FF_REVISION)/' \
	    < libstamp.pre > libstamp.c

exelibstamp.c: exelibstamp.pre
	$(SED) -e '1,$$ s/REPLACE_ME_WITH_MAJOR_VERSION/$(FF_VERSION)/'  \
	       -e '1,$$ s/REPLACE_ME_WITH_MINOR_VERSION/$(FF_REVISION)/' \
	    < exelibstamp.pre > exelibstamp.c

# Due to past experience, splinerefigure.c now is compiled without
# optimization.
obj/splinerefigure.c.o: splinerefigure.c splinefont.h
	$(CC) -g $(CPPFLAGS) @MY_CFLAGS@ @PTHREAD_CFLAGS@ -DHAVE_CONFIG_H -c \
		-o $(GNUSTEP_OBJ_DIR)/splinerefigure.c.o splinerefigure.c
